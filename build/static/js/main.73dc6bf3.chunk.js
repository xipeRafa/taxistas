(this.webpackJsonpauctioneer=this.webpackJsonpauctioneer||[]).push([[0],{141:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(22),r=c(10),s=c(157),i=c(76),o=(c(88),c(145),c(146),i.a.initializeApp({apiKey:"AIzaSyB3s6QjYWR6EL45XSK7ANP-D_1I-DZ9eYg",authDomain:"taxis-e44d6.firebaseapp.com",projectId:"taxis-e44d6",storageBucket:"taxis-e44d6.appspot.com",messagingSenderId:"603667662446",appId:"1:603667662446:web:0014b763a2a4acca92487f"})),l=i.a.firestore.FieldValue.serverTimestamp,j=o.firestore(),u=o.storage(),d=o.auth(),b=c(2),O=Object(n.createContext)(),x=function(e){var t=e.children,c=Object(n.useState)(null),a=Object(r.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)(!0),l=Object(r.a)(o,2),u=l[0],x=l[1],m=Object(n.useState)(""),h=Object(r.a)(m,2),f=h[0],p=h[1];return Object(n.useEffect)((function(){return d.onAuthStateChanged((function(e){i(e),x(!1)}))}),[]),Object(n.useEffect)((function(){var e=setTimeout((function(){return p("")}),5e3);return function(){return clearTimeout(e)}}),[f]),Object(b.jsx)(O.Provider,{value:{currentUser:s,register:function(e,t){return d.createUserWithEmailAndPassword(e,t)},login:function(e,t){return d.signInWithEmailAndPassword(e,t)},logout:function(){return d.signOut()},bidAuction:function(e){return j.collection("auctions").doc(e).update({completed:!0})},endAuction:function(e){return j.collection("auctions").doc(e).delete()},globalMsg:f},children:!u&&t})},m=c(153),h=c(43),f=function(e){var t=Object(n.useState)([]),c=Object(r.a)(t,2),a=c[0],s=c[1];return Object(n.useEffect)((function(){var t=j.collection(e).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(h.a)(Object(h.a)({},e.data()),{},{id:e.id}))})),s(t)}));return function(){return t()}}),[e]),{docs:a}},p=function(e){var t,c,a=e.item,r=e.handleState,s=Object(n.useContext)(O).currentUser;f("auctions").docs.map((function(e){e.id===a.id&&(t=e.duration),e.id===a.id&&(c=e.completed)}));var i=new Date(t).toLocaleTimeString("es-CL"),o=new Date(t).toLocaleDateString("es-CL",{weekday:"short",year:"numeric",month:"short",day:"numeric"});return Object(b.jsx)("div",{className:"col",children:Object(b.jsxs)("div",{className:"card shadow-sm",children:[Object(b.jsx)("div",{onClick:function(){return r(a)},style:{height:"180px",backgroundImage:"url(".concat(a.imgUrl,")"),backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},className:"w-100 mt-4"}),Object(b.jsxs)("div",{className:"card-body p-4",children:[Object(b.jsxs)("p",{className:"h5",children:[Object(b.jsx)("span",{className:"text-secondary",children:"KL "})," ",a.title]}),Object(b.jsx)("div",{className:"d-flex jsutify-content-between align-item-center",children:Object(b.jsxs)("h5",{children:[Object(b.jsx)("span",{className:"text-secondary",children:"cliente"})," ",a.categorie]})}),Object(b.jsx)("div",{children:Object(b.jsxs)("p",{children:[o,", ",i.slice(0,-3)]})}),Object(b.jsxs)("p",{className:"card-text",children:[a.description.slice(0,20),"..."]}),Object(b.jsx)("div",{className:"d-flex justify-content-between align-item-center",children:s&&Object(b.jsx)(m.a,{className:c?"btn btn-primary w-100":"btn btn-danger w-100",children:c?"Completado":" Sin Completar"})})]})]})})},v=c(154),g=c(31),y=c.n(g),N=c(36),w=function(e){var t=Object(n.useState)(0),c=Object(r.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(null),o=Object(r.a)(i,2),d=o[0],b=o[1];return Object(n.useState)((function(){var t=u.ref(e.itemImage.name),c=j.collection("auctions");t.put(e.itemImage).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){console.log(e)}),Object(N.a)(y.a.mark((function n(){var a,r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getDownloadURL();case 2:return a=n.sent,r=l(),delete e.itemImage,n.next=7,c.add(Object(h.a)(Object(h.a)({},e),{},{createdAt:r,imgUrl:a}));case 7:b(!0);case 8:case"end":return n.stop()}}),n)}))))}),[e]),{progress:a,isCompleted:d}},C=function(e){var t=e.auction,c=e.setAuction,a=w(t),r=a.progress,s=a.isCompleted;return Object(n.useEffect)((function(){s&&c(null)}),[s,c]),Object(b.jsx)(v.a.div,{style:{height:"5px",background:"black"},initial:{width:0},animate:{width:"".concat(r,"%")}})},S=c(27),k=Object(n.createContext)(),D=function(e){var t=e.children,c=f("auctions").docs,a=Object(S.a)(c),s=Object(n.useState)(a),i=Object(r.a)(s,2),o=i[0],l=i[1];return Object(b.jsx)(k.Provider,{value:{handleDB:function(e){l(e)},DB:o},children:t})},L=c(77),A=c.n(L),P=(c(93),function(e){var t,c=e.itemState,n=void 0===c?{title:"Inicia sesi\xf3n",imgUrl:"https://image.shutterstock.com/image-photo/indifferent-puzzled-female-shruggs-shoulders-600w-1164353026.jpg"}:c,a=f("auctions").docs,r=n.title,s="";a.map((function(e){e.id===n.id&&(s=e.email),e.id===n.id&&(t=e.createdAt.seconds)}));var i=new Date(1e3*t).toLocaleTimeString("es-CL"),o=new Date(1e3*t).toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"short",day:"numeric"});return Object(b.jsxs)("div",{className:"m-5",children:[Object(b.jsx)("div",{className:n.completed?"bg-primary text-white p-2 text-center":"bg-danger text-white p-2 text-center",children:n.completed?"COMPLETADO":"SIN COMPLETAR"}),Object(b.jsxs)("div",{className:"card pb-0",children:[Object(b.jsx)("div",{style:{height:"400px",backgroundImage:"url(".concat(n.imgUrl,")"),backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},className:"w-100 mb-4 mt-2"}),"Inicia sesi\xf3n"!==r&&Object(b.jsxs)("div",{className:"card-body",children:[Object(b.jsxs)("p",{className:"lead display-6 pl-2",children:[Object(b.jsx)("span",{className:"text-secondary",children:"Taxi: "})," ",n.title]}),Object(b.jsx)("div",{className:"d-flex jsutify-content-between align-item-center",children:Object(b.jsxs)("h5",{children:[Object(b.jsx)("span",{className:"text-secondary",children:"Correo: "})," ",s]})}),Object(b.jsxs)("h5",{children:[Object(b.jsx)("span",{className:"text-secondary",children:"Fecha: "})," ",o,", "," ",i]}),Object(b.jsxs)("h5",{className:"card-text",children:[Object(b.jsx)("span",{className:"text-secondary",children:"Comentarios: "})," ",n.description]})]})]})]})}),I=function(){var e=f("auctions").docs,t=Object(S.a)(e),c=Object(n.useContext)(k).handleDB,a=Object(n.useState)([]),s=Object(r.a)(a,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){if("Price"!==i[0])if("PriceMaxToMin"!==i[0])if("DateMaxToMin"!==i[0])if("Date"!==i[0]);else{var e=t.sort((function(e,t){return e.createdAt-t.createdAt}));c(e)}else{var n=t.sort((function(e,t){return t.createdAt-e.createdAt}));c(n)}else{var a=t.sort((function(e,t){return t.curPrice-e.curPrice}));c(a)}else{var r=t.sort((function(e,t){return e.curPrice-t.curPrice}));c(r)}}),[i]),Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"w-75",children:[Object(b.jsx)("h2",{children:"Filtros"}),Object(b.jsxs)("select",{className:"form-select w-100 ",onChange:function(e){var t=Array.from(e.target.selectedOptions,(function(e){return e.value}));o(t)},value:i,children:[Object(b.jsx)("option",{children:"Filtrar por"}),Object(b.jsx)("option",{value:"Price",children:"Precio"}),Object(b.jsx)("option",{value:"PriceMaxToMin",children:"Precio Max to Min"}),Object(b.jsx)("option",{value:"Date",children:"Fecha"}),Object(b.jsx)("option",{value:"DateMaxToMin",children:"Fecha Max to Min"})]})]})})},M=function(){var e=f("auctions").docs,t=Object(S.a)(e),c=Object(n.useContext)(k).handleDB,a=Object(n.useState)([]),s=Object(r.a)(a,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){if("all"!==i[0])if("done"!==i[0])if("fallen"!==i[0]);else{var e=t.filter((function(e){return!1===e.completed}));c(e)}else{var n=t.filter((function(e){return!0===e.completed}));c(n)}else{var a=t.filter((function(e){return e}));c(a)}}),[i]),Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"w-75 mt-5",children:[Object(b.jsx)("h2",{children:"Resultados"}),Object(b.jsxs)("select",{className:"form-select w-100 ",onChange:function(e){var t=Array.from(e.target.selectedOptions,(function(e){return e.value}));o(t)},value:i,children:[Object(b.jsx)("option",{value:"all",children:"Todos"}),Object(b.jsx)("option",{value:"done",children:"Completados"}),Object(b.jsx)("option",{value:"fallen",children:"Sin Completar"})]})]})})},E=function(){var e=Object(n.useContext)(k).handleDB,t=f("auctions").docs,c=Object(S.a)(t),a=Object(n.useState)(!0),s=Object(r.a)(a,2),i=s[0],o=s[1],l=Object(n.useState)(!0),j=Object(r.a)(l,2),u=j[0],d=j[1],O=Object(n.useState)(!0),x=Object(r.a)(O,2),m=x[0],h=x[1],p=Object(n.useState)([]),v=Object(r.a)(p,2),g=v[0],y=v[1];function N(e,t){var c=e.indexOf(t);c>-1&&e.splice(c,1)}return Object(n.useEffect)((function(){for(var t=function(e){var t=c.filter((function(t){return t.categorie!==g[e]}));c=t},n=0;n<g.length;n++)t(n);e(c)}),[g,i,u,m]),Object(n.useEffect)((function(){setTimeout((function(){o(!i),o(!0)}),200)}),[t]),Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"w-75 mt-5",children:[Object(b.jsx)("h2",{children:"Clientes"}),Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{type:"checkbox",className:"m-1",value:"oxxo",onChange:function(e){return function(e){o(!i),i?y([].concat(Object(S.a)(g),[e.target.value])):N(g,e.target.value)}(e)},checked:i}),"oxxo"]}),Object(b.jsx)("br",{}),Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{type:"checkbox",className:"m-1",value:"otro1",onChange:function(e){return function(e){d(!u),u?y([].concat(Object(S.a)(g),[e.target.value])):N(g,e.target.value)}(e)},checked:u}),"otro1"]}),Object(b.jsx)("br",{}),Object(b.jsxs)("label",{children:[Object(b.jsx)("input",{type:"checkbox",className:"m-1",value:"otro2",onChange:function(e){return function(e){h(!m),m?y([].concat(Object(S.a)(g),[e.target.value])):N(g,e.target.value)}(e)},checked:m}),"otro2"]})]})})},T=function(){return Object(b.jsxs)("div",{style:{paddingLeft:"16px"},className:"d-flex justify-content-between flex-column pb-5  ",children:[Object(b.jsx)(I,{}),Object(b.jsx)(M,{}),Object(b.jsx)(E,{})]})},R=(c(94),c(81));Object(L.registerLocale)("es",R.a);var F=function(){var e,t=Object(n.useState)(null),c=Object(r.a)(t,2),a=c[0],i=c[1],o=Object(n.useContext)(O),l=o.currentUser,j=o.globalMsg,u=Object(n.useContext)(k).DB,d=Object(n.useState)(),x=Object(r.a)(d,2),m=x[0],h=x[1],f=function(e){h(e)};e="superadmin@gmail.com"===(!!l&&l.email)?u.sort((function(e,t){return e.completed===t.completed?0:t.completed?-1:1})):[];var v=Object(n.useState)(),g=Object(r.a)(v,2),y=g[0],N=g[1],w=Object(n.useState)(),S=Object(r.a)(w,2),D=S[0],L=S[1];console.log(D);var I=Object(n.useState)([]),M=Object(r.a)(I,2),E=M[0],R=M[1];console.log(E);var F=E.filter((function(e){return e})).length,B=Object(n.useState)(),U=Object(r.a)(B,2),z=U[0],q=U[1];console.log(z);var G=Object(n.useState)([]),H=Object(r.a)(G,2),K=(H[0],H[1]),W=Object(n.useState)(),J=Object(r.a)(W,2),Y=J[0],_=J[1];console.log(Y);var Q=Object(n.useState)(),V=Object(r.a)(Q,2),X=V[0],Z=V[1];console.log(X);var $=Object(n.useState)([]),ee=Object(r.a)($,2),te=ee[0],ce=ee[1];console.log(te);var ne=E;Y?(ne=Y.filter((function(e){return!1!==e})),te.length>0&&(ne=te)):E&&(ne=E.sort((function(e,t){return e.duration-t.duration})).sort((function(e,t){return e.completed===t.completed?0:t.completed?-1:1})));var ae=e;return E.length>0&&(ae=ne),Object(b.jsxs)("div",{className:"container-fluid",children:[a&&Object(b.jsx)(C,{auction:a,setAuction:i}),Object(b.jsx)("div",{style:{zIndex:"9999999"},className:"text-center w-50 position-fixed top-10 start-50 translate-middle",children:j&&Object(b.jsx)(s.a,{variant:"danger",children:j})}),Object(b.jsxs)("div",{className:"row bg-secondary pt-4 pb-3",children:[Object(b.jsxs)("div",{className:"text-white bg-primary mb-3",style:{marginLeft:"50px!important"},children:[F," viajes el dia: ",Object(b.jsx)("br",{})," ",y]}),Object(b.jsx)("div",{className:"col-1"}),Object(b.jsx)("div",{className:"col-3  text-center mb-4",children:Object(b.jsx)(A.a,{selected:D,onChange:function(e){L(e);var t=null===e||void 0===e?void 0:e.getTime(),c=t+864e5,n=new Date(t).toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"short",day:"numeric"});N(n);var a=u.map((function(e,n){if(e.duration>t&&e.duration<c)return e}));R(a)},onFocus:function(){R([])},locale:"es",className:"pickers mb-3 form-control mt-2 w-100 ",dateFormat:"dd 'de' MMMM 'de' yyyy"})}),Object(b.jsx)("div",{className:"col-1"}),Object(b.jsx)("div",{className:"col-3 text-center",children:Object(b.jsx)("form",{onSubmit:function(e){e.preventDefault(),K(z);var t=E.filter((function(e){return void 0!==e})).map((function(e){return e.email===z+"@gmail.com"&&e}));_(t)},children:Object(b.jsx)("input",{type:"text",onChange:function(e){q(e.target.value),ce([])},value:z,className:E.length>0?"w-100 form-control mt-2":"d-none",style:{width:"0"},placeholder:"filtrar por correo"})})}),Object(b.jsx)("div",{className:"col-1"}),Object(b.jsx)("div",{className:(null===E||void 0===E?void 0:E.length)>0?"col-3 mt-0 fr":"d-none",children:Object(b.jsxs)("div",{className:(null===Y||void 0===Y?void 0:Y.length)>0?"w-50":"d-none",onChange:function(e){return function(e){Z(e),ce([]);var t=null===Y||void 0===Y?void 0:Y.filter((function(e){return!1!==e})),c=t;"completados"===X?(c=t.filter((function(e){return!0!==e.completed})),ce(c)):(c=t.filter((function(e){return!1!==e.completed})),ce(c))}(e.target.value)},children:[Object(b.jsx)("input",{type:"button",className:"btn text-white btn-secondary",name:"drone",value:"Todos",onClick:function(){return ce([])}}),Object(b.jsxs)("label",{className:"btn text-white btn-secondary",children:[Object(b.jsx)("input",{type:"radio",value:"completados",name:"drone",className:"d-none"}),"Completados"]}),Object(b.jsxs)("label",{className:"btn text-white btn-secondary",children:[Object(b.jsx)("input",{type:"radio",value:"nocompletados",name:"drone",className:"d-none",for:"chackbox2"}),"No Completados"]})]})})]}),u&&Object(b.jsxs)("div",{className:"row row-cols-1 row-cols-md-3 row-cols-lg-4 p-5 g-3 border mt-1 ",children:[Object(b.jsx)("div",{className:E.length>0&&"d-none",children:Object(b.jsx)(T,{})}),ae.filter((function(e){return void 0!==e})).map((function(e){return Object(b.jsx)(p,{item:e,handleState:f},e.id)}))]}),Object(b.jsx)(P,{itemState:m})]})},B=c.p+"static/media/canal10.24a72002.png",U=c(155),z=c(156),q=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(""),o=Object(r.a)(i,2),l=o[0],j=o[1],u=Object(n.useRef)(),d=Object(n.useRef)(),x=Object(n.useContext)(O).login,h=function(){return a(!1)},f=function(){var e=Object(N.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),j(""),e.prev=2,e.next=5,x(u.current.value,d.current.value);case 5:h(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),j("Invalid login");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{onClick:function(){return a(!0)},className:"btn btn-outline-secondary mx-2",children:"Entrar"}),Object(b.jsx)(U.a,{centered:!0,show:c,onHide:h,children:Object(b.jsxs)("form",{onSubmit:f,children:[Object(b.jsx)(U.a.Header,{children:Object(b.jsx)(U.a.Title,{children:"Entrar"})}),Object(b.jsxs)(U.a.Body,{children:[l&&Object(b.jsx)(s.a,{variant:"danger",children:l}),Object(b.jsxs)(z.a.Group,{children:[Object(b.jsx)(z.a.Label,{children:"Email "}),Object(b.jsx)(z.a.Control,{type:"email",required:!0,ref:u})]}),Object(b.jsxs)(z.a.Group,{children:[Object(b.jsx)(z.a.Label,{children:"Password"}),Object(b.jsx)(z.a.Control,{type:"password",required:!0,ref:d})]})]}),Object(b.jsxs)(U.a.Footer,{children:[Object(b.jsx)(m.a,{variant:"secondary",onClick:h,children:"Cancelar"}),Object(b.jsx)(m.a,{variant:"primary",type:"submit",children:"Entrar"})]})]})})]})},G=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(""),o=Object(r.a)(i,2),l=o[0],j=o[1],u=Object(n.useRef)(),d=Object(n.useRef)(),x=Object(n.useRef)(),h=Object(n.useContext)(O).register,f=function(){return a(!1)},p=function(){var e=Object(N.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),j(""),d.current.value===x.current.value){e.next=4;break}return e.abrupt("return",j("Passwords does not match"));case 4:return e.prev=4,e.next=7,h(u.current.value,d.current.value);case 7:f(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),j(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(U.a,{centered:!0,show:c,onHide:f,children:Object(b.jsxs)("form",{onSubmit:p,children:[Object(b.jsx)(U.a.Header,{children:Object(b.jsx)(U.a.Title,{children:"Registro"})}),Object(b.jsxs)(U.a.Body,{children:[l&&Object(b.jsx)(s.a,{variant:"danger",children:l}),Object(b.jsxs)(z.a.Group,{children:[Object(b.jsx)(z.a.Label,{children:"Email"}),Object(b.jsx)(z.a.Control,{type:"email",required:!0,ref:u})]}),Object(b.jsxs)(z.a.Group,{children:[Object(b.jsx)(z.a.Label,{children:"Password"}),Object(b.jsx)(z.a.Control,{type:"password",required:!0,ref:d})]}),Object(b.jsxs)(z.a.Group,{children:[Object(b.jsx)(z.a.Label,{children:"Confirmar Password"}),Object(b.jsx)(z.a.Control,{type:"password",required:!0,ref:x})]})]}),Object(b.jsxs)(U.a.Footer,{children:[Object(b.jsx)(m.a,{variant:"secondary",onClick:f,children:"Cancelar"}),Object(b.jsx)(m.a,{variant:"primary",type:"submit",children:"Registrar"})]})]})})})},H=function(){var e=Object(n.useContext)(O),t=e.currentUser,c=e.logout;return Object(b.jsx)("nav",{className:"container-fluid navbar navbar-light border",children:Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsxs)("div",{className:"navbar-brand",children:[Object(b.jsx)("img",{src:B,alt:"logo",height:"50"})," ADMINISTRACI\xd3N"]}),Object(b.jsx)("div",{className:"d-flex",children:Object(b.jsx)("div",{className:"col",children:t?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"btn btn-success mx-2 disabled",children:t.email}),Object(b.jsx)("div",{onClick:function(){return c()},className:"btn btn-outline-secondary mx-2",children:"SALIR"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(q,{}),Object(b.jsx)(G,{})]})})})]})})},K=function(){return Object(b.jsx)(x,{children:Object(b.jsxs)(D,{children:[Object(b.jsx)(H,{}),Object(b.jsx)(F,{})]})})};c(139);Object(a.render)(Object(b.jsx)(K,{}),document.getElementById("root"))},94:function(e,t,c){}},[[141,1,2]]]);
//# sourceMappingURL=main.73dc6bf3.chunk.js.map