(this.webpackJsonpauctioneer=this.webpackJsonpauctioneer||[]).push([[0],{58:function(e,t,r){},63:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r(24),a=r(10),s=r(74),i=r(44),o=(r(53),r(64),r(65),i.a.initializeApp({apiKey:"AIzaSyB2F4R4KkxUwb4GFKs7twRhiHS5i-i51D4",authDomain:"scopic-73416.firebaseapp.com",projectId:"scopic-73416",storageBucket:"scopic-73416.appspot.com",messagingSenderId:"475263107333",appId:"1:475263107333:web:27180a036864e16618376c"})),j=i.a.firestore.FieldValue.serverTimestamp,l=o.firestore(),u=o.storage(),b=o.auth(),d=r(2),O=Object(c.createContext)(),x=function(e){var t=e.children,r=Object(c.useState)(null),n=Object(a.a)(r,2),s=n[0],i=n[1],o=Object(c.useState)(!0),j=Object(a.a)(o,2),u=j[0],x=j[1],h=Object(c.useState)(""),f=Object(a.a)(h,2),p=f[0],m=f[1];return Object(c.useEffect)((function(){return b.onAuthStateChanged((function(e){i(e),x(!1)}))}),[]),Object(c.useEffect)((function(){var e=setTimeout((function(){return m("")}),5e3);return function(){return clearTimeout(e)}}),[p]),Object(d.jsx)(O.Provider,{value:{currentUser:s,register:function(e,t){return b.createUserWithEmailAndPassword(e,t)},login:function(e,t){return b.signInWithEmailAndPassword(e,t)},logout:function(){return b.signOut()},bidAuction:function(e){return l.collection("auctions").doc(e).update({acuerdo:!0})},noteContext:function(e,t){return l.collection("auctions").doc(e).update({note:t})},endAuction:function(e){return l.collection("auctions").doc(e).delete()},globalMsg:p},children:!u&&t})},h=r(71),f=r(16),p=r.n(f),m=r(28),v=r(22),g=function(e){var t=Object(c.useState)(0),r=Object(a.a)(t,2),n=r[0],s=r[1],i=Object(c.useState)(null),o=Object(a.a)(i,2),b=o[0],d=o[1];return Object(c.useState)((function(){var t=u.ref(e.itemImage.name),r=l.collection("auctions");t.put(e.itemImage).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){console.log(e)}),Object(v.a)(p.a.mark((function c(){var n,a;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.getDownloadURL();case 2:return n=c.sent,a=j(),delete e.itemImage,c.next=7,r.add(Object(m.a)(Object(m.a)({},e),{},{createdAt:a,imgUrl:n}));case 7:d(!0);case 8:case"end":return c.stop()}}),c)}))))}),[e]),{progress:n,isCompleted:b}},w=function(e){var t=e.auction,r=e.setAuction,n=g(t),a=n.progress,s=n.isCompleted;return Object(c.useEffect)((function(){s&&r(null)}),[s,r]),Object(d.jsx)(h.a.div,{style:{height:"5px",background:"black"},initial:{width:0},animate:{width:"".concat(a,"%")}})},y=r(48),C=Object(c.createContext)(),S=function(e){var t=e.children,r=function(e){var t=Object(c.useState)([]),r=Object(a.a)(t,2),n=r[0],s=r[1];return Object(c.useEffect)((function(){var t=l.collection(e).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id}))})),s(t)}));return function(){return t()}}),[e]),{docs:n}}("auctions").docs,n=Object(y.a)(r),s=Object(c.useState)(n),i=Object(a.a)(s,2),o=i[0],j=i[1];return Object(d.jsx)(C.Provider,{value:{handleDB:function(e){j(e)},DB:o},children:t})},k=(r(58),r(72)),L=r(69),N=r(47),A=r(73),R=r(70),E=function(e){var t=e.setAuction,r=Object(c.useState)(""),n=Object(a.a)(r,2),i=n[0],o=n[1],j=Object(c.useRef)(),l=Object(c.useRef)(),u=Object(c.useRef)(),b=Object(c.useRef)(),x=Object(c.useRef)(),h=Object(c.useContext)(O).currentUser,f=function(){var e=Object(v.a)(p.a.mark((function e(r){var c,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),o(""),c=new Date,n=c.setHours(c.getHours()),a={email:h.email,title:j.current.value,title1:l.current.value,title2:u.current.value,description:b.current.value,duration:n,categorie:x.current.value,completed:!1},t(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=new Date,g=new Date(m).toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"short",day:"numeric"});return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("form",{onSubmit:f,style:{backgroundColor:"rgb(222,222,222)",marginLeft:"12.5%"},className:"border border-dark w-75 mt-5",children:[Object(d.jsxs)(k.a.Body,{children:[i&&Object(d.jsx)(s.a,{variant:"danger",children:i}),Object(d.jsx)(L.a,{children:Object(d.jsx)(N.a,{className:"border mb-4 btn bg-dark mx-2 p-2 text-center text-white ",children:g})}),Object(d.jsx)(L.a,{children:Object(d.jsx)(N.a,{className:"mb-4",children:Object(d.jsxs)(A.a.Group,{children:[Object(d.jsx)(A.a.Label,{children:"Unidad"}),Object(d.jsx)(A.a.Control,{type:"text",required:!0,ref:j})]})})}),Object(d.jsx)(L.a,{children:Object(d.jsx)(N.a,{className:"mb-4",children:Object(d.jsxs)(A.a.Group,{children:[Object(d.jsx)(A.a.Label,{children:"Taxista"}),Object(d.jsx)(A.a.Control,{type:"text",required:!0,ref:j})]})})}),Object(d.jsx)(L.a,{children:Object(d.jsx)(N.a,{className:"mb-4",children:Object(d.jsxs)(A.a.Group,{children:[Object(d.jsx)(A.a.Label,{children:"Algo 1"}),Object(d.jsx)(A.a.Control,{type:"text",required:!0,ref:l})]})})}),Object(d.jsx)(L.a,{children:Object(d.jsx)(N.a,{className:"mb-4",children:Object(d.jsxs)(A.a.Group,{children:[Object(d.jsx)(A.a.Label,{children:"Algo 2"}),Object(d.jsx)(A.a.Control,{type:"text",required:!0,ref:u})]})})}),Object(d.jsx)(L.a,{children:Object(d.jsxs)(N.a,{className:"mb-4",children:[Object(d.jsx)(A.a.Label,{children:"Opciones"}),Object(d.jsxs)(A.a.Control,{as:"select",multiple:!1,ref:x,children:[Object(d.jsx)("option",{value:"oxxo",children:"Reparacion"}),Object(d.jsx)("option",{value:"otro",children:"Mantenimiento"}),Object(d.jsx)("option",{value:"pago en efectivo",children:"LLantas"}),Object(d.jsx)("option",{value:"accidente",children:"Accidente"},"")]})]})}),Object(d.jsx)(L.a,{children:Object(d.jsx)(N.a,{children:Object(d.jsxs)(A.a.Group,{children:[Object(d.jsx)(A.a.Label,{children:"Comentarios"}),Object(d.jsx)(A.a.Control,{as:"textarea",placeholder:"comentarios...",style:{height:"80px",resize:"none"},required:!0,ref:b})]})})})]}),Object(d.jsx)(k.a.Footer,{children:Object(d.jsx)(R.a,{variant:"secondary",type:"submit",disabled:!0,className:"w-100",children:"Guardar Ticket"})})]})})},D=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),r=t[0],n=t[1],i=Object(c.useContext)(O),o=i.currentUser,j=i.globalMsg,l=Object(c.useContext)(C).DB,u=Object(c.useState)(),b=Object(a.a)(u,2);b[0],b[1],!!o&&o.email;return l.sort((function(e,t){return e.completed===t.completed?0:t.completed?-1:1})),Object(d.jsxs)("div",{className:"container-fluid",children:[r&&Object(d.jsx)(w,{auction:r,setAuction:n}),Object(d.jsx)("div",{style:{zIndex:"9999999"},className:"text-center w-50 position-fixed top-10 start-50 translate-middle",children:j&&Object(d.jsx)(s.a,{variant:"danger",children:j})}),o&&Object(d.jsx)(E,{setAuction:n}),l&&Object(d.jsx)("div",{className:"row row-cols-1 row-cols-md-3 row-cols-lg-4 p-5 g-3 border mt-1 "})]})},I=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),r=t[0],n=t[1],i=Object(c.useState)(""),o=Object(a.a)(i,2),j=o[0],l=o[1],u=Object(c.useRef)(),b=Object(c.useRef)(),x=Object(c.useContext)(O).login,h=function(){return n(!1)},f=function(){var e=Object(v.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),l(""),e.prev=2,e.next=5,x(u.current.value,b.current.value);case 5:h(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),l("Invalid login");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{onClick:function(){return n(!0)},className:"cursor-pointer mx-2",children:"Entrar"}),Object(d.jsx)(k.a,{centered:!0,show:r,onHide:h,children:Object(d.jsxs)("form",{onSubmit:f,children:[Object(d.jsx)(k.a.Header,{children:Object(d.jsx)(k.a.Title,{children:"Entrar"})}),Object(d.jsxs)(k.a.Body,{children:[j&&Object(d.jsx)(s.a,{variant:"danger",children:j}),Object(d.jsxs)(A.a.Group,{children:[Object(d.jsx)(A.a.Label,{children:"Email "}),Object(d.jsx)(A.a.Control,{type:"email",required:!0,ref:u})]}),Object(d.jsxs)(A.a.Group,{children:[Object(d.jsx)(A.a.Label,{children:"Password"}),Object(d.jsx)(A.a.Control,{type:"password",required:!0,ref:b})]})]}),Object(d.jsxs)(k.a.Footer,{children:[Object(d.jsx)(R.a,{variant:"secondary",onClick:h,children:"Cancelar"}),Object(d.jsx)(R.a,{variant:"primary",type:"submit",children:"Entrar"})]})]})})]})},G=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),r=t[0],n=t[1],i=Object(c.useState)(""),o=Object(a.a)(i,2),j=o[0],l=o[1],u=Object(c.useRef)(),b=Object(c.useRef)(),x=Object(c.useRef)(),h=Object(c.useContext)(O).register,f=function(){return n(!1)},m=function(){var e=Object(v.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),l(""),b.current.value===x.current.value){e.next=4;break}return e.abrupt("return",l("Passwords does not match"));case 4:return e.prev=4,e.next=7,h(u.current.value,b.current.value);case 7:f(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),l(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(k.a,{centered:!0,show:r,onHide:f,children:Object(d.jsxs)("form",{onSubmit:m,children:[Object(d.jsx)(k.a.Header,{children:Object(d.jsx)(k.a.Title,{children:"Registro"})}),Object(d.jsxs)(k.a.Body,{children:[j&&Object(d.jsx)(s.a,{variant:"danger",children:j}),Object(d.jsxs)(A.a.Group,{children:[Object(d.jsx)(A.a.Label,{children:"Email"}),Object(d.jsx)(A.a.Control,{type:"email",required:!0,ref:u})]}),Object(d.jsxs)(A.a.Group,{children:[Object(d.jsx)(A.a.Label,{children:"Password"}),Object(d.jsx)(A.a.Control,{type:"password",required:!0,ref:b})]}),Object(d.jsxs)(A.a.Group,{children:[Object(d.jsx)(A.a.Label,{children:"Confirmar Password"}),Object(d.jsx)(A.a.Control,{type:"password",required:!0,ref:x})]})]}),Object(d.jsxs)(k.a.Footer,{children:[Object(d.jsx)(R.a,{variant:"secondary",onClick:f,children:"Cancelar"}),Object(d.jsx)(R.a,{variant:"primary",type:"submit",children:"Registrar"})]})]})})})},F=function(){var e=Object(c.useContext)(O),t=e.currentUser,r=e.logout;return Object(d.jsx)("nav",{className:"container-fluid navbar navbar-light bg-danger",children:Object(d.jsxs)("div",{className:"container-fluid",children:[Object(d.jsx)("div",{className:"navbar-brand",children:" TALLER DE TAXIS"}),Object(d.jsx)("div",{className:"d-flex",children:Object(d.jsx)("div",{className:"col",children:t?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"btn mx-2",children:["Encargado en turno: ",Object(d.jsx)("span",{className:"p-2 disabled",children:t.email.slice(0,-10)})]}),Object(d.jsx)("div",{onClick:function(){return r()},className:"btn mx-2",children:"SALIR"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(I,{}),Object(d.jsx)(G,{})]})})})]})})},q=function(){return Object(d.jsx)(x,{children:Object(d.jsxs)(S,{children:[Object(d.jsx)(F,{}),Object(d.jsx)(D,{})]})})};r(62);Object(n.render)(Object(d.jsx)(q,{}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.6003bce6.chunk.js.map